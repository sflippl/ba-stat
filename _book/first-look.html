<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="" />
  
  
  

<meta name="author" content="Samuel Lippl">


<meta name="date" content="2018-09-15">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="methods.html">
<link rel="next" href="concept.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A user interface for complex datsets</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>2</b> Methodology</a><ul>
<li class="chapter" data-level="2.1" data-path="methods.html"><a href="methods.html#v-dem"><i class="fa fa-check"></i><b>2.1</b> V-Dem</a><ul>
<li class="chapter" data-level="2.1.1" data-path="methods.html"><a href="methods.html#introduction-to-the-database"><i class="fa fa-check"></i><b>2.1.1</b> Introduction to the database</a></li>
<li class="chapter" data-level="2.1.2" data-path="methods.html"><a href="methods.html#vdem.tectr"><i class="fa fa-check"></i><b>2.1.2</b> <code>vdem.tectr</code></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="methods.html"><a href="methods.html#package-construction"><i class="fa fa-check"></i><b>2.2</b> Package construction</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="first-look.html"><a href="first-look.html"><i class="fa fa-check"></i><b>3</b> First look</a><ul>
<li class="chapter" data-level="3.1" data-path="first-look.html"><a href="first-look.html#fx_ggplot-basics"><i class="fa fa-check"></i><b>3.1</b> <code>fx_ggplot</code>: Basics</a></li>
<li class="chapter" data-level="3.2" data-path="first-look.html"><a href="first-look.html#modifying-the-default-values"><i class="fa fa-check"></i><b>3.2</b> Modifying the default values</a></li>
<li class="chapter" data-level="3.3" data-path="first-look.html"><a href="first-look.html#summary"><i class="fa fa-check"></i><b>3.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="concept.html"><a href="concept.html"><i class="fa fa-check"></i><b>4</b> Description of <code>tectr</code></a><ul>
<li class="chapter" data-level="4.1" data-path="concept.html"><a href="concept.html#effective-explicitness-a-perspective-of-knowledge"><i class="fa fa-check"></i><b>4.1</b> Effective Explicitness: A perspective of knowledge</a></li>
<li class="chapter" data-level="4.2" data-path="concept.html"><a href="concept.html#underlying-structure"><i class="fa fa-check"></i><b>4.2</b> Underlying structure</a><ul>
<li class="chapter" data-level="4.2.1" data-path="concept.html"><a href="concept.html#the-metaframe"><i class="fa fa-check"></i><b>4.2.1</b> The metaframe</a></li>
<li class="chapter" data-level="4.2.2" data-path="concept.html"><a href="concept.html#extending-fx-functions"><i class="fa fa-check"></i><b>4.2.2</b> Extending fx functions</a></li>
<li class="chapter" data-level="4.2.3" data-path="concept.html"><a href="concept.html#other-concepts"><i class="fa fa-check"></i><b>4.2.3</b> Other concepts</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="concept.html"><a href="concept.html#fx_default"><i class="fa fa-check"></i><b>4.3</b> <code>fx_default</code></a><ul>
<li class="chapter" data-level="4.3.1" data-path="concept.html"><a href="concept.html#general-purpose"><i class="fa fa-check"></i><b>4.3.1</b> General purpose</a></li>
<li class="chapter" data-level="4.3.2" data-path="concept.html"><a href="concept.html#extensions"><i class="fa fa-check"></i><b>4.3.2</b> Extensions</a></li>
<li class="chapter" data-level="4.3.3" data-path="concept.html"><a href="concept.html#alternative-implementations"><i class="fa fa-check"></i><b>4.3.3</b> Alternative implementations</a></li>
<li class="chapter" data-level="4.3.4" data-path="concept.html"><a href="concept.html#lifecycle"><i class="fa fa-check"></i><b>4.3.4</b> Lifecycle</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="concept.html"><a href="concept.html#fx_info"><i class="fa fa-check"></i><b>4.4</b> <code>fx_info</code></a><ul>
<li class="chapter" data-level="4.4.1" data-path="concept.html"><a href="concept.html#general-purpose-1"><i class="fa fa-check"></i><b>4.4.1</b> General purpose</a></li>
<li class="chapter" data-level="4.4.2" data-path="concept.html"><a href="concept.html#extensions-1"><i class="fa fa-check"></i><b>4.4.2</b> Extensions</a></li>
<li class="chapter" data-level="4.4.3" data-path="concept.html"><a href="concept.html#lifecycle-1"><i class="fa fa-check"></i><b>4.4.3</b> Lifecycle</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="concept.html"><a href="concept.html#fx_output"><i class="fa fa-check"></i><b>4.5</b> <code>fx_output</code></a><ul>
<li class="chapter" data-level="4.5.1" data-path="concept.html"><a href="concept.html#general-purpose-2"><i class="fa fa-check"></i><b>4.5.1</b> General purpose</a></li>
<li class="chapter" data-level="4.5.2" data-path="concept.html"><a href="concept.html#extensions-2"><i class="fa fa-check"></i><b>4.5.2</b> Extensions</a></li>
<li class="chapter" data-level="4.5.3" data-path="concept.html"><a href="concept.html#lifecycle-2"><i class="fa fa-check"></i><b>4.5.3</b> Lifecycle</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="concept.html"><a href="concept.html#fx_write"><i class="fa fa-check"></i><b>4.6</b> <code>fx_write</code></a><ul>
<li class="chapter" data-level="4.6.1" data-path="concept.html"><a href="concept.html#general-purpose-3"><i class="fa fa-check"></i><b>4.6.1</b> General purpose</a></li>
<li class="chapter" data-level="4.6.2" data-path="concept.html"><a href="concept.html#extensions-3"><i class="fa fa-check"></i><b>4.6.2</b> Extensions</a></li>
<li class="chapter" data-level="4.6.3" data-path="concept.html"><a href="concept.html#alternative-implementations-1"><i class="fa fa-check"></i><b>4.6.3</b> Alternative implementations</a></li>
<li class="chapter" data-level="4.6.4" data-path="concept.html"><a href="concept.html#lifecycle-3"><i class="fa fa-check"></i><b>4.6.4</b> Lifecycle</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="concept.html"><a href="concept.html#fx-ggplot"><i class="fa fa-check"></i><b>4.7</b> <code>fx_ggplot</code></a><ul>
<li class="chapter" data-level="4.7.1" data-path="concept.html"><a href="concept.html#concept-of-fx_ggplot"><i class="fa fa-check"></i><b>4.7.1</b> Concept of <code>fx_ggplot</code></a></li>
<li class="chapter" data-level="4.7.2" data-path="concept.html"><a href="concept.html#implementation-of-the-independent-layers"><i class="fa fa-check"></i><b>4.7.2</b> Implementation of the independent layers</a></li>
<li class="chapter" data-level="4.7.3" data-path="concept.html"><a href="concept.html#implementation-of-the-voting-system"><i class="fa fa-check"></i><b>4.7.3</b> Implementation of the voting system</a></li>
<li class="chapter" data-level="4.7.4" data-path="concept.html"><a href="concept.html#discussion-and-alternatives"><i class="fa fa-check"></i><b>4.7.4</b> Discussion and alternatives</a></li>
<li class="chapter" data-level="4.7.5" data-path="concept.html"><a href="concept.html#lifecycle-and-further-development"><i class="fa fa-check"></i><b>4.7.5</b> Lifecycle and further development</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="final-words.html"><a href="final-words.html"><i class="fa fa-check"></i><b>5</b> Final Words</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="first-look" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> First look</h1>
<p>This chapter is devoted to first applied example of the package before the <a href="concept.html#concept">fourth chapter</a> introduces the concepts of <code>tectr</code> in a more comprehensive way.</p>
<p>As an example, we will consider the V-Dem database that has been introduced in the preceding chapter. We will focus on the function <code>fx_ggplot</code> as an example. It is based on the package <code>ggplot2</code> which implements the grammar of graphics to R in order to produce visualizations. <span class="citation">(Wickham <a href="#ref-ggplot">2016</a>)</span></p>
<div id="fx_ggplot-basics" class="section level2">
<h2><span class="header-section-number">3.1</span> <code>fx_ggplot</code>: Basics</h2>
<p>In the following, I will present different example applications of <code>fx_ggplot</code>.</p>
<p>We will at first consider the electoral democracy index and its distribution. The result is depicted in figure <a href="first-look.html#fig:3-1">3.1</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_vdem <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(v2x_polyarchy) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fx_ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> v2x_polyarchy)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span>my_theme <span class="co"># my_theme makes the text larger</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:3-1"></span>
<img src="bachelor-thesis_files/figure-html/3-1-1.png" alt="Visualization of v2x_polyarchy with fx_ggplot" width="50%" />
<p class="caption">
Figure 3.1: Visualization of v2x_polyarchy with <code>fx_ggplot</code>
</p>
</div>

<p>This plot is evidently a histogram. However there are several differences to the ordinary call in figure <a href="first-look.html#fig:3-2">3.2</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(df_vdem, <span class="kw">aes</span>(<span class="dt">x =</span> v2x_polyarchy)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_histogram</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span>my_theme</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:3-2"></span>
<img src="bachelor-thesis_files/figure-html/3-2-1.png" alt="Ordinary histogram of v2x_polyarchy" width="50%" />
<p class="caption">
Figure 3.2: Ordinary histogram of v2x_polyarchy
</p>
</div>

<p>Namely, the axis title lists the number of missing values and the x-axis has been log transformed. This is because <code>tectr</code> attempts to guess reasonable default values which yield more informative plots than the default values of <code>ggplot</code>. It is able to do so because these default values can flexibly be changed.</p>
<p>Behind the scenes, the function calls <code>fx_default</code> which sets several default values for every column and saves them in a <em>metaframe</em> which is stored as an attribute of the data frame. The result can be seen in <a href="first-look.html#tab:3-3">3.1</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fx_ggplot_columns</code></pre></div>
<pre><code>## [1] &quot;fxGeom_class&quot;  &quot;fxGeom_limits&quot; &quot;fxGeom_trans&quot;  &quot;fxInfo_name&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span>
<span class="st">  </span>df_vdem <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(v2x_polyarchy) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fx_default</span>(<span class="dt">columns =</span> fx_ggplot_columns)</code></pre></div>
<table>
<caption><span id="tab:3-3">Table 3.1: </span>The default metaframe of v2x_polyarchy.</caption>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">fxGeom_class</th>
<th align="left">fxGeom_limits</th>
<th align="left">fxGeom_trans</th>
<th align="left">fxInfo_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">v2x_polyarchy</td>
<td align="left">Continuous</td>
<td align="left">c(0.007, 0.94)</td>
<td align="left">log10</td>
<td align="left">v2x polyarchy</td>
</tr>
</tbody>
</table>

<p>In <code>fxGeom_class</code>, for instance, the class of the variable is listed which has an influence on the defined graphics and is used to influence a lot of other default values.</p>
<p><code>fx_ggplot</code> itself attempts to infer the appropriate visualization from the specification of aesthetics and the class of the data. Thus, we receive a different plot if we specify the y variable, as well. Let us first consider the relationship between the electoral and the liberal democracy index in the 2017 which can be seen in <a href="first-look.html#fig:3-4">3.3</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_vdem <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(v2x_polyarchy, v2x_libdem) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fx_ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> v2x_polyarchy, <span class="dt">y =</span> v2x_libdem)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span>my_theme</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:3-4"></span>
<img src="bachelor-thesis_files/figure-html/3-4-1.png" alt="Scatter plot with fx_ggplot" width="50%" />
<p class="caption">
Figure 3.3: Scatter plot with <code>fx_ggplot</code>
</p>
</div>

<p>In this case, the scatter plot is a sensible choice. On the other hand, if we wish to visualize the entire database (which consists of 26537 observations), an ordinary scatter plot would lead to severe overplotting. <code>fx_ggplot</code> recognizes this and chooses a more appropriate graphic in figure <a href="first-look.html#fig:3-5">3.4</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_vdem <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(v2x_polyarchy, v2x_libdem) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fx_ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> v2x_polyarchy, <span class="dt">y =</span> v2x_libdem)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span>my_theme</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:3-5"></span>
<img src="bachelor-thesis_files/figure-html/3-5-1.png" alt="fx_ggplot prevents overplotting" width="50%" />
<p class="caption">
Figure 3.4: <code>fx_ggplot</code> prevents overplotting
</p>
</div>

<p>This choice is flexible, as well; should we, for instance, wish to use the colour aesthetics to represent the year of the observation, the plot adapts, as can be seen in <a href="first-look.html#fig:3-6">3.5</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_vdem <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(v2x_polyarchy, v2x_libdem, year) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fx_ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> v2x_polyarchy, <span class="dt">y =</span> v2x_libdem, <span class="dt">colour =</span> year)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span>my_theme</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:3-6"></span>
<img src="bachelor-thesis_files/figure-html/3-6-1.png" alt="fx_ggplot with three variables" width="50%" />
<p class="caption">
Figure 3.5: <code>fx_ggplot</code> with three variables
</p>
</div>

<p>The increased transparency of the points improves oversight over the plot. Note that <code>fx_ggplot</code> is not intended to protect the user from specifications within <code>aes</code> that do not make sense but rather intends to build the best plot for the specified aesthetics. Adding the size of the points as an additional aesthetic would make the plot confusing. This is, however, not the scope of <code>fx_ggplot</code>. I will discuss this point further in chapter 4.</p>
</div>
<div id="modifying-the-default-values" class="section level2">
<h2><span class="header-section-number">3.2</span> Modifying the default values</h2>
<p>The default values which the plot uses may be changed by modifying the metaframe in which they are stored. Consider, as an example, the development of the liberal democracy index in Germany and Afghanistan over time (figure <a href="first-look.html#fig:3-8">3.6</a>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_vdem <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(country_name <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;Afghanistan&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(year, v2x_libdem, country_name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fx_ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> v2x_libdem, <span class="dt">colour =</span> country_name)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span>my_theme</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:3-8"></span>
<img src="bachelor-thesis_files/figure-html/3-8-1.png" alt="Time series with fx_ggplot" width="50%" />
<p class="caption">
Figure 3.6: Time series with fx_ggplot
</p>
</div>

<p>This is evidently not a very useful plot; although we are able to extrapolate the developments in both countries, a line plot would be preferred. The problem is that <code>fx_ggplot</code> does not know that year represents a time. The fxGeom class corresponding the time variable is “Time”. We can modify the metaframe accordingly.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># To modify default values, we need to define a function that changes the fxGeom_class of </span>
<span class="co"># the questionable names and returns that (modified or unmodified) argument.</span>

year_is_time &lt;-<span class="st"> </span><span class="cf">function</span>(fxGeom_class, name) {
  <span class="cf">if</span>(name <span class="op">==</span><span class="st"> &quot;year&quot;</span>) <span class="kw">return</span>(<span class="st">&quot;Time&quot;</span>)
  fxGeom_class
}

df_vdem <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(country_name <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;Afghanistan&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(year, v2x_libdem, country_name) <span class="op">%&gt;%</span><span class="st"> </span>

<span class="st">  </span><span class="co"># If called without an argument, fx_default simply instantiates the metaframe with the names.</span>

<span class="st">  </span><span class="kw">fx_default</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>
<span class="st">  </span><span class="co"># The function responsible for the default value is fx_default_fxGeom_class. </span>
<span class="st">  </span><span class="co"># It accepts as an argument a function that changes the default classes.</span>
<span class="st">  </span>
<span class="st">  </span><span class="kw">mutate_mf</span>(
    <span class="dt">fxGeom_class =</span> <span class="kw">fx_default_fxGeom_class</span>(., <span class="dt">custom_fun =</span> year_is_time), 
    <span class="dt">fxGeom_assoc_vars =</span> <span class="kw">aes</span>(<span class="dt">group =</span> country_name) 
  
    <span class="co"># The second variable specifies which observations should be viewed as a instances of a </span>
    <span class="co"># coherent unit, i. e. be connected by lines.</span>
  
    ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fx_ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> v2x_libdem, <span class="dt">colour =</span> country_name)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span>my_theme</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:3-9"></span>
<img src="bachelor-thesis_files/figure-html/3-9-1.png" alt="Time series with modified metaframe" width="50%" />
<p class="caption">
Figure 3.7: Time series with modified metaframe
</p>
</div>

<p>In the resulting figure <a href="first-look.html#fig:3-9">3.7</a>, the expected line plot is displayed. The time class is able to prevent overplotting, as well. Suppose that we now consider all observations:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_vdem <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(year, v2x_libdem, country_name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>
<span class="st">  </span><span class="co"># If called without an argument, fx_default simply instantiates the metaframe with the names.</span>
<span class="st">  </span>
<span class="st">  </span><span class="kw">fx_default</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>
<span class="st">  </span><span class="co"># The function responsible for the default value is fx_default_fxGeom_class. </span>
<span class="st">  </span><span class="co"># It accepts as an argument a function that changes these classes.</span>
<span class="st">  </span><span class="co"># Its first argument is the data frame itself.</span>
<span class="st">  </span>
<span class="st">  </span><span class="kw">mutate_mf</span>(
    <span class="dt">fxGeom_class =</span> <span class="kw">fx_default_fxGeom_class</span>(., <span class="dt">custom_fun =</span> year_is_time), 
    <span class="dt">fxGeom_assoc_vars =</span> purrr<span class="op">::</span><span class="kw">map</span>(
      name, 
      <span class="cf">function</span>(name) {
        <span class="cf">if</span>(name <span class="op">==</span><span class="st"> &quot;year&quot;</span>) <span class="kw">return</span>(<span class="kw">aes</span>(<span class="dt">group =</span> country_name))
        <span class="kw">aes</span>()
      }
    )
  
    <span class="co"># The second variable specifies which observations should be viewed as a instances of a </span>
    <span class="co"># coherent unit, i. e. be connected by lines.</span>
  
  ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">fx_ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> v2x_libdem)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span>my_theme</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:3-10"></span>
<img src="bachelor-thesis_files/figure-html/3-10-1.png" alt="fx_ggplot prevents overfitting in time series" width="50%" />
<p class="caption">
Figure 3.8: <code>fx_ggplot</code> prevents overfitting in time series
</p>
</div>

</div>
<div id="summary" class="section level2">
<h2><span class="header-section-number">3.3</span> Summary</h2>
<p>The ability to modify the default values is a crucial feature of <code>tectr</code> and I will discuss the broader background of these considerations in the next chapter.</p>
<p>Summarizing the depicted workflow:</p>
<ul>
<li><p>at first, we were interested in different visualizations and we approximated this by specifying aesthetics</p></li>
<li><p>the first visualizations broadly matched our idea and we saw no need to adapt the plots</p></li>
<li><p>as we encountered a plot we were unhappy with, we changed two default parameters. We were content with the result once again and the modification was both quick and easy to store.</p></li>
</ul>
<p>This is the essence of <code>tectr</code>’s goal and the considerations in the subsequent chapter will be a more extensive embedding of the following two priorities:</p>
<ol style="list-style-type: decimal">
<li><p>Implement <em>strong defaults</em> which the user needs to change as scarcely as possible.</p></li>
<li><p>When the user needs to change something, make it <em>easy and permanent</em>.</p></li>
</ol>
<p>These are, of course, very general principles. When applied to <code>tectr</code>, however, it becomes evident in what way they would not be of use in other packages.</p>
<p>Take, for instance, the scale transformations. While they will be discussed in more detail, below, the default assumes certain transformations for particularly skewed data. This would be completely unsuitable in the case of the underlying package <code>ggplot2</code>. Imputed transformations introduce uncertainty as the users are unsure what exactly they will produce unless they specify a lot of parameters. In most cases, <em>easy defaults</em> are therefore more sensible than <em>strong defaults</em>. Only the second priority makes them useful; if they could not reliably and permanently be changed, they would constitute a constant burden. With these two priorities, however, they are more likely to fulfill their intended purpose of decreasing the cognitive cost of the user.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-ggplot">
<p>Wickham, Hadley. 2016. <em>ggplot2: Elegant Graphics for Data Analysis</em>. Springer-Verlag New York. <a href="http://ggplot2.org" class="uri">http://ggplot2.org</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="methods.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="concept.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["bachelor-thesis.pdf", "bachelor-thesis.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
